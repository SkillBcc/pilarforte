
<!-- Navigation -->
<nav class="fixed w-full z-50 nav-container transition-all duration-300 ease-in-out" 
     [class.shadow-lg]="isScrolled()"
     [class.bg-opacity-95]="!isScrolled()"
     [class.bg-opacity-100]="isScrolled()"
     [style.background-color]="isScrolled() ? '#1C1C1C' : 'rgba(28, 28, 28, 0.95)'">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between transition-all duration-300 ease-in-out" 
         [class.h-24]="!isScrolled()" 
         [class.h-16]="isScrolled()">
      
      <!-- Logo Area -->
      <a routerLink="/" class="flex-shrink-0 flex items-center gap-4 cursor-pointer group">
        <!-- Icon Container -->
        <div class="relative flex items-center justify-center logo-box transition-all duration-300 ease-in-out"
             [class.w-20]="!isScrolled()"
             [class.h-20]="!isScrolled()"
             [class.w-14]="isScrolled()"
             [class.h-14]="isScrolled()">
          
          <!-- REFINED LOGO SVG -->
          <svg class="w-full h-full drop-shadow-md" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- 1. Blueprint Grid Lines (Gold #B89E68) -->
            <g stroke="#B89E68" stroke-width="0.5" opacity="0.7">
              <!-- Central Cross -->
              <line x1="50" y1="15" x2="50" y2="85" />
              <line x1="15" y1="50" x2="85" y2="50" />
              <!-- Inner Box -->
              <rect x="28" y="28" width="44" height="44" fill="none" />
              <!-- Tech Dots -->
              <circle cx="28" cy="28" r="1" fill="#B89E68" stroke="none" />
              <circle cx="72" cy="28" r="1" fill="#B89E68" stroke="none" />
              <circle cx="28" cy="72" r="1" fill="#B89E68" stroke="none" />
              <circle cx="72" cy="72" r="1" fill="#B89E68" stroke="none" />
            </g>

            <!-- 2. Circles -->
            <!-- Outer Thick White Ring -->
            <circle cx="50" cy="50" r="44" stroke="white" stroke-width="3" />
            <!-- Inner Thin Gold Ring -->
            <circle cx="50" cy="50" r="40" stroke="#B89E68" stroke-width="0.8" />

            <!-- 3. The Column (White Body) -->
            <g fill="white">
              <!-- Base -->
              <rect x="36" y="78" width="28" height="4" />
              <rect x="39" y="75" width="22" height="3" />
              
              <!-- Shaft -->
              <rect x="41" y="38" width="18" height="37" />
              
              <!-- Capital (Ionic Style) -->
              <!-- Abacus -->
              <rect x="36" y="30" width="28" height="3" />
              <!-- Volutes Body -->
              <path d="M36 33 C33 33 33 38 36 38 H64 C67 38 67 33 64 33 H36 Z" />
            </g>

            <!-- 4. Details (Gold) -->
            <!-- Fluting on Shaft -->
            <g fill="#B89E68" opacity="0.6">
              <rect x="44" y="38" width="1" height="37" />
              <rect x="49.5" y="38" width="1" height="37" />
              <rect x="55" y="38" width="1" height="37" />
            </g>
            
            <!-- Volute Spirals -->
            <circle cx="39" cy="35.5" r="1.5" stroke="#B89E68" stroke-width="0.8" fill="white" />
            <circle cx="61" cy="35.5" r="1.5" stroke="#B89E68" stroke-width="0.8" fill="white" />
          </svg>
        </div>

        <!-- Typography (Right Side) -->
        <div class="flex flex-col justify-center transition-all duration-300 origin-left" [class.scale-90]="isScrolled()">
          <span class="text-2xl font-serif font-bold text-white tracking-widest leading-none drop-shadow-sm">PILAR FORTE</span>
          <div class="flex items-center gap-2 mt-1 transition-opacity duration-300" 
               [class.opacity-0]="isScrolled()" 
               [class.h-0]="isScrolled()"
               [class.overflow-hidden]="isScrolled()">
            <div class="h-[1px] w-6 bg-pilar-gold"></div>
            <span class="text-[10px] uppercase font-bold text-gray-300 tracking-[0.2em] leading-none">Engenharia & Construção</span>
          </div>
        </div>
      </a>

      <!-- Desktop Menu -->
      <div class="hidden md:block">
        <div class="ml-10 flex items-baseline space-x-8">
          <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link">INÍCIO</a>
          <a routerLink="/empresa" routerLinkActive="active" class="nav-link">A EMPRESA</a>
          <a routerLink="/servicos" routerLinkActive="active" class="nav-link">SERVIÇOS</a>
          <a routerLink="/portfolio" routerLinkActive="active" class="nav-link">PORTFÓLIO</a>
          <a routerLink="/contactos" routerLinkActive="active" class="btn-contact rounded-sm text-sm">CONTACTOS</a>
        </div>
      </div>

      <!-- Mobile Menu Button -->
      <div class="-mr-2 flex md:hidden">
        <button (click)="toggleMenu()" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none">
          <span class="sr-only">Abrir menu</span>
          <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu Panel -->
  @if (mobileMenuOpen()) {
    <div class="md:hidden mobile-menu">
      <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
        <a routerLink="/" (click)="closeMenu()" class="block px-3 py-2 rounded-md text-base font-medium">INÍCIO</a>
        <a routerLink="/empresa" (click)="closeMenu()" class="block px-3 py-2 rounded-md text-base font-medium">A EMPRESA</a>
        <a routerLink="/servicos" (click)="closeMenu()" class="block px-3 py-2 rounded-md text-base font-medium">SERVIÇOS</a>
        <a routerLink="/portfolio" (click)="closeMenu()" class="block px-3 py-2 rounded-md text-base font-medium">PORTFÓLIO</a>
        <a routerLink="/contactos" (click)="closeMenu()" class="highlight block px-3 py-2 rounded-md text-base font-medium">CONTACTOS</a>
      </div>
    </div>
  }
</nav>

<!-- Main Content Area -->
<main class="min-h-screen">
  <router-outlet></router-outlet>
</main>

<!-- Footer -->
<footer class="footer-base py-12 text-sm">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center gap-6">
    <div class="text-center md:text-left">
      <span class="text-lg font-bold brand">PILAR FORTE</span>
      <p class="mt-1">&copy; {{ currentYear }} Pilar Forte Engenharia & Construção. Todos os direitos reservados.</p>
    </div>
    <div class="flex space-x-6">
      <a href="#" class="transition-colors">Política de Privacidade</a>
      <a href="#" class="transition-colors">Termos e Condições</a>
      <a href="#" class="transition-colors">Livro de Reclamações</a>
    </div>
  </div>
</footer>
